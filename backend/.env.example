# =============================================================================
# NOVUS PROJECT DATABASE - Environment Configuration
# =============================================================================
# SECURITY WARNING: Never commit real credentials to version control!
# Copy this file to .env and fill in your actual values.
# =============================================================================

# -----------------------------------------------------------------------------
# REQUIRED IN ALL ENVIRONMENTS
# -----------------------------------------------------------------------------

# Database Connection (PostgreSQL with asyncpg)
# Format: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://npd:npd@localhost:6702/npd

# Application Secret Key (minimum 32 characters)
# Generate with: python -c "from secrets import token_urlsafe; print(token_urlsafe(32))"
# WARNING: If not set, a random key is generated (sessions won't persist across restarts)
SECRET_KEY=

# -----------------------------------------------------------------------------
# AZURE AD AUTHENTICATION (Required for production)
# -----------------------------------------------------------------------------

# Azure AD tenant ID (Directory ID from Azure Portal)
AZURE_AD_TENANT_ID=

# Azure AD application client ID (Application ID from Azure Portal)
AZURE_AD_CLIENT_ID=

# Azure AD client secret (create in Azure Portal > Certificates & secrets)
AZURE_AD_CLIENT_SECRET=

# OAuth callback URL (must match Azure AD app registration)
AZURE_AD_REDIRECT_URI=http://localhost:6701/api/v1/auth/callback

# -----------------------------------------------------------------------------
# APPLICATION SETTINGS
# -----------------------------------------------------------------------------

# Environment: development, staging, or production
# production = strict validation, no debug
# development = relaxed validation, debug allowed
ENVIRONMENT=development

# Enable debug mode (exposes API docs at /docs and /redoc)
# WARNING: Set to false in production!
DEBUG=true

# -----------------------------------------------------------------------------
# OPTIONAL SETTINGS (defaults shown)
# -----------------------------------------------------------------------------

# Ollama embedding service
OLLAMA_BASE_URL=http://localhost:6703

# File Storage
UPLOAD_DIR=./uploads
MAX_FILE_SIZE_MB=50

# CORS Origins (JSON array or comma-separated)
CORS_ORIGINS=["http://localhost:6700"]

# Allowed email domains (empty = allow all from tenant)
ALLOWED_EMAIL_DOMAINS=["novuslabs.com"]

# -----------------------------------------------------------------------------
# CLAMAV ANTIVIRUS (Optional Security Enhancement)
# -----------------------------------------------------------------------------

# Enable ClamAV antivirus scanning for uploads
# Requires ClamAV container running (see docker-compose.yml)
CLAMAV_ENABLED=false

# ClamAV daemon connection settings
CLAMAV_HOST=localhost
CLAMAV_PORT=3310
CLAMAV_TIMEOUT=30

# Scan files during upload (when enabled)
CLAMAV_SCAN_ON_UPLOAD=true

# Fail open: if true, allow upload when ClamAV unavailable
# Set to false in high-security environments
CLAMAV_FAIL_OPEN=true

# -----------------------------------------------------------------------------
# GITHUB INTEGRATION (Optional - for feedback system)
# -----------------------------------------------------------------------------

# GitHub API token (for creating issues and comments)
# Generate at: https://github.com/settings/tokens (needs repo scope)
GITHUB_API_TOKEN=

# GitHub webhook secret (for verifying webhook signatures)
# Generate with: openssl rand -hex 32
GITHUB_WEBHOOK_SECRET=

# GitHub repository settings (defaults shown)
# GITHUB_OWNER=PaultheAICoder
# GITHUB_REPO=NovusProjectDatabase

# -----------------------------------------------------------------------------
# CRON JOB SECURITY
# -----------------------------------------------------------------------------

# Bearer token for cron endpoint authentication
# Generate with: openssl rand -hex 32
CRON_SECRET=

# -----------------------------------------------------------------------------
# FEEDBACK EMAIL (Optional - for verification loop)
# -----------------------------------------------------------------------------

# Shared mailbox for feedback notifications (requires Graph API permissions)
FEEDBACK_EMAIL=

# -----------------------------------------------------------------------------
# EMBEDDING CACHE (Redis - Optional)
# -----------------------------------------------------------------------------

# Redis URL for embedding cache (optional - falls back to in-memory if not set)
# Format: redis://host:port/db
# For Docker: redis://redis:6379/0
# For local: redis://localhost:6705/0
REDIS_URL=

# Cache TTL in seconds (default: 86400 = 24 hours)
EMBEDDING_CACHE_TTL=86400

# Max entries for in-memory fallback cache (default: 10000)
EMBEDDING_CACHE_MAXSIZE=10000

# -----------------------------------------------------------------------------
# SEARCH CACHE (Redis - Optional)
# -----------------------------------------------------------------------------

# Search result cache TTL in seconds (default: 300 = 5 minutes)
SEARCH_CACHE_TTL=300

# Enable/disable search caching (default: true)
SEARCH_CACHE_ENABLED=true
